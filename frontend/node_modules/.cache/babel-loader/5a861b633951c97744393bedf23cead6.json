{"ast":null,"code":"import _toConsumableArray from\"/root/home/covid/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/root/home/covid/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/home/covid/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/root/home/covid/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/root/home/covid/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/home/covid/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import ReactDOMServer from'react-dom/server';import{Row,Col,Card,UncontrolledAlert}from'reactstrap';import Dropzone from'react-dropzone';var Layout=function Layout(_ref){var input=_ref.input,previews=_ref.previews,submitButton=_ref.submitButton,dropzoneProps=_ref.dropzoneProps,files=_ref.files,maxFiles=_ref.extra.maxFiles;return/*#__PURE__*/React.createElement(\"div\",null,previews,/*#__PURE__*/React.createElement(\"div\",dropzoneProps,files.length<maxFiles&&input),files.length>0&&submitButton);};var FileUploader=/*#__PURE__*/function(_Component){_inherits(FileUploader,_Component);var _super=_createSuper(FileUploader);function FileUploader(props){var _this;_classCallCheck(this,FileUploader);_this=_super.call(this,props);_this.handleAcceptedFiles=function(files){var allFiles=files;console.log(allFiles);if(files.length>1){_this.setState({status:true});_this.setState({error:\"Please select only one file\"});return;}console.log();var filename=files[0].path;console.log(filename);var arr=filename.split(\".\");console.log(arr[arr.length-1]);if(arr[arr.length-1]!==\"jpg\"&&arr[arr.length-1]!==\"jpeg\"&&arr[arr.length-1]!==\"JPG\"&&arr[arr.length-1]!==\"JPEG\"&&arr[arr.length-1]!==\"png\"&&arr[arr.length-1]!==\"PNG\"){_this.setState({status:true});_this.setState({error:\"Please select an image file (jpg/jpeg/png)\"});return;}if(_this.props.showPreview){var _allFiles;files.map(function(file){return Object.assign(file,{preview:file['type'].split('/')[0]==='image'?URL.createObjectURL(file):null,formattedSize:_this.formatBytes(file.size)});});allFiles=_this.state.selectedFiles;(_allFiles=allFiles).push.apply(_allFiles,_toConsumableArray(files));_this.setState({selectedFiles:allFiles});}if(_this.props.onFileUpload)_this.props.onFileUpload(allFiles);};_this.onDismiss=function(){_this.setState({status:false});_this.setState({error:null});};_this.formatBytes=function(bytes,decimals){if(bytes===0)return'0 Bytes';var k=1024;var dm=decimals<0?0:decimals;var sizes=['Bytes','KB','MB','GB','TB','PB','EB','ZB','YB'];var i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(dm))+' '+sizes[i];};_this.handleAcceptedFiles=_this.handleAcceptedFiles.bind(_assertThisInitialized(_this));_this.state={selectedFiles:[],status:false,error:null};return _this;}/**\n     * Handled the accepted files and shows the preview\n     */_createClass(FileUploader,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Dropzone,Object.assign({onDrop:function onDrop(acceptedFiles){return _this2.handleAcceptedFiles(acceptedFiles);},maxFiles:1,LayoutComponent:Layout,accept:\"image/*\"//classNames={{ inputLabelWithFiles: defaultClassNames.inputLabel }}\n,inputContent:\"Drop Files (Custom Layout)\"//inputContent={(files, extra) => (extra.reject ? 'Image files only' : 'Drag Files')}\n},this.props),function(_ref2){var getRootProps=_ref2.getRootProps,getInputProps=_ref2.getInputProps;return/*#__PURE__*/React.createElement(\"div\",{className:\"dropzone text-center\"},/*#__PURE__*/React.createElement(\"div\",Object.assign({className:\"dz-message py-5 needsclick\"},getRootProps()),/*#__PURE__*/React.createElement(\"input\",getInputProps()),/*#__PURE__*/React.createElement(\"i\",{className:\"h1 text-muted uil-cloud-upload\"}),/*#__PURE__*/React.createElement(\"h3\",null,\"Drop files here or click to upload.\")));}),this.state.status&&/*#__PURE__*/React.createElement(UncontrolledAlert,{color:\"danger\",toggle:this.onDismiss},/*#__PURE__*/React.createElement(\"strong\",null,this.state.error)),this.props.showPreview&&/*#__PURE__*/React.createElement(\"div\",{className:\"dropzone-previews mt-3\",id:\"file-previews\"},this.state.selectedFiles.map(function(f,i){return/*#__PURE__*/React.createElement(Card,{className:\"mt-1 mb-0 shadow-none border dz-processing dz-image-preview dz-success dz-complete\",key:i+'-file'},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2\"},/*#__PURE__*/React.createElement(Row,{className:\"align-items-center\"},f.preview&&/*#__PURE__*/React.createElement(Col,{className:\"col-auto\"},/*#__PURE__*/React.createElement(\"img\",{\"data-dz-thumbnail\":\"\",className:\"avatar-sm rounded bg-light\",alt:f.name,src:f.preview})),!f.preview&&/*#__PURE__*/React.createElement(Col,{className:\"col-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"avatar-sm\"},/*#__PURE__*/React.createElement(\"span\",{className:\"avatar-title bg-primary rounded\"},f.type.split('/')[0]))),/*#__PURE__*/React.createElement(Col,{className:\"pl-0\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"text-muted font-weight-bold\"},f.name),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"strong\",null,f.formattedSize))))));})));}}]);return FileUploader;}(Component);FileUploader.defaultProps={showPreview:true};export default FileUploader;","map":{"version":3,"sources":["/root/home/covid/frontend/src/components/FileUploader.js"],"names":["React","Component","Link","ReactDOMServer","Row","Col","Card","UncontrolledAlert","Dropzone","Layout","input","previews","submitButton","dropzoneProps","files","maxFiles","extra","length","FileUploader","props","handleAcceptedFiles","allFiles","console","log","setState","status","error","filename","path","arr","split","showPreview","map","file","Object","assign","preview","URL","createObjectURL","formattedSize","formatBytes","size","state","selectedFiles","push","onFileUpload","onDismiss","bytes","decimals","k","dm","sizes","i","Math","floor","parseFloat","pow","toFixed","bind","acceptedFiles","getRootProps","getInputProps","f","name","type","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport ReactDOMServer from 'react-dom/server';\nimport { Row, Col, Card, UncontrolledAlert } from 'reactstrap';\nimport Dropzone from 'react-dropzone';\n\nconst Layout = ({ input, previews, submitButton, dropzoneProps, files, extra: { maxFiles } }) => {\n    return (\n      <div>\n        {previews}\n  \n        <div {...dropzoneProps}>\n          {files.length < maxFiles && input}\n        </div>\n  \n        {files.length > 0 && submitButton}\n      </div>\n    )\n  }\nclass FileUploader extends Component {\n    static defaultProps = {\n        showPreview: true,\n    };\n\n    constructor(props) {\n        super(props);\n        this.handleAcceptedFiles = this.handleAcceptedFiles.bind(this);\n\n        this.state = {\n            selectedFiles: [],\n            status: false,\n            error: null\n        };\n    }\n\n    /**\n     * Handled the accepted files and shows the preview\n     */\n    handleAcceptedFiles = (files) => {\n        var allFiles = files;\n        console.log(allFiles);\n\n        if(files.length>1){\n           this.setState({status: true});\n           this.setState({error: \"Please select only one file\"});\n                        return;\n        }\n        console.log()\n        let filename = files[0].path;\n        console.log(filename);\n        let arr = filename.split(\".\");\n        console.log(arr[arr.length-1]);\n        if(arr[arr.length-1]!==\"jpg\"&&arr[arr.length-1]!==\"jpeg\"&&arr[arr.length-1]!==\"JPG\"&&arr[arr.length-1]!==\"JPEG\"&&arr[arr.length-1]!==\"png\"&&arr[arr.length-1]!==\"PNG\"){\n            this.setState({status: true});\n            this.setState({error: \"Please select an image file (jpg/jpeg/png)\"});\n                         return;\n        }\n        if (this.props.showPreview) {\n            files.map(file =>\n                Object.assign(file, {\n                    preview: file['type'].split('/')[0] === 'image' ? URL.createObjectURL(file) : null,\n                    formattedSize: this.formatBytes(file.size),\n                })\n            );\n\n            allFiles = this.state.selectedFiles;\n            allFiles.push(...files);\n            this.setState({ selectedFiles: allFiles });\n        }\n\n        if (this.props.onFileUpload) this.props.onFileUpload(allFiles);\n    };\n\n    onDismiss = () => {\n        this.setState({status: false});\n        this.setState({error: null});\n    }\n    /**\n     * Formats the size\n     */\n    formatBytes = (bytes, decimals) => {\n        if (bytes === 0) return '0 Bytes';\n        const k = 1024;\n        const dm = decimals < 0 ? 0 : decimals;\n        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n    };\n\n    render() {\n        return (\n            <React.Fragment>\n                <Dropzone \n                onDrop={acceptedFiles => this.handleAcceptedFiles(acceptedFiles)}\n                maxFiles={1}\n                LayoutComponent={Layout}\n                accept=\"image/*\"\n                //classNames={{ inputLabelWithFiles: defaultClassNames.inputLabel }}\n                inputContent=\"Drop Files (Custom Layout)\"\n                //inputContent={(files, extra) => (extra.reject ? 'Image files only' : 'Drag Files')}\n                {...this.props}>\n                    {({ getRootProps, getInputProps }) => (\n                        <div className=\"dropzone text-center\">\n                            <div className=\"dz-message py-5 needsclick\" {...getRootProps()}>\n                                <input {...getInputProps()} />\n                                <i className=\"h1 text-muted uil-cloud-upload\"></i>\n                                <h3>Drop files here or click to upload.</h3>\n                                {/* <span className=\"text-muted font-13\">\n                                    (This is just a demo dropzone. Selected files are <strong>not</strong> actually\n                                    uploaded.)\n                                </span> */}\n                            </div>\n                        </div>\n                    )}\n                </Dropzone>\n                {this.state.status && (\n                    <UncontrolledAlert color={\"danger\"} toggle={this.onDismiss}>\n                    <strong>{this.state.error}</strong>\n                     </UncontrolledAlert>\n                )}\n                {this.props.showPreview && (\n                    <div className=\"dropzone-previews mt-3\" id=\"file-previews\">\n                        {this.state.selectedFiles.map((f, i) => {\n                            return (\n                                <Card\n                                    className=\"mt-1 mb-0 shadow-none border dz-processing dz-image-preview dz-success dz-complete\"\n                                    key={i + '-file'}>\n                                    <div className=\"p-2\">\n                                        <Row className=\"align-items-center\">\n                                            {f.preview && (\n                                                <Col className=\"col-auto\">\n                                                    <img\n                                                        data-dz-thumbnail=\"\"\n                                                        className=\"avatar-sm rounded bg-light\"\n                                                        alt={f.name}\n                                                        src={f.preview}\n                                                    />\n                                                </Col>\n                                            )}\n                                            {!f.preview && (\n                                                <Col className=\"col-auto\">\n                                                    <div className=\"avatar-sm\">\n                                                        <span className=\"avatar-title bg-primary rounded\">\n                                                            {f.type.split('/')[0]}\n                                                        </span>\n                                                    </div>\n                                                </Col>\n                                            )}\n                                            <Col className=\"pl-0\">\n                                                <Link to=\"#\" className=\"text-muted font-weight-bold\">\n                                                    {f.name}\n                                                </Link>\n                                                <p className=\"mb-0\">\n                                                    <strong>{f.formattedSize}</strong>\n                                                </p>\n                                            </Col>\n                                        </Row>\n                                    </div>\n                                </Card>\n                            );\n                        })}\n                    </div>\n                )}\n            </React.Fragment>\n        );\n    }\n}\n\nexport default FileUploader;\n"]},"metadata":{},"sourceType":"module"}